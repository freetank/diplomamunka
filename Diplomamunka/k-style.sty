\usepackage{amsmath}

%%% Graphics.

\RequirePackage{tikz}
\usetikzlibrary{shapes.misc}
\usetikzlibrary{calc}

%%% Module

\newenvironment{module}[1]{%
  \tikzset{comment/.style={basic comment,fill=black!10}}%
  \par\noindent%
  \text{\scshape module #1}%
  \setlength{\parindent}{1em}%
  \par\ \par%
}{%
  \par\noindent\text{\scshape end module}%
  \par\ \par%
}

\newenvironment{commentModule}{%
  \setlength{\parindent}{1em}%
  \par\ \par%
}{%
  \par\ \par%
}

\newcommand{\moduleName}[1]{#1}
\newcommand{\including}[1]{\par\text{\scshape imports}\ #1\par\ \par}
\newcommand{\modulePlus}{$+$}

%%% Equations and structural rules.

\newcommand{\rulebox}[1]{\hbox{#1}}

%%% Syntax

% Sorts and kinds.
\newcommand{\sort}[1]{\text{\itshape #1}}
\newcommand{\syntaxKeyword}{\mbox{\scshape syntax}\hspace{1em}}

\newcommand{\syntax}[3][\defSort]{\rulebox{%
\syntaxKeyword$#1\mathrel{::=}{#2}$ \ifthenelse{\equal{#3}{}}{}{[#3]}%
}
}

\newenvironment{syntaxBlock}[1]{\newcommand{\defSort}{#1}\par\indent\ }{\par\ \par}

% Non-terminals.
\newcommand{\nonTerminal}[1]{\text{\itshape #1}\/}